<div class="container-fluid">
  <app-block-header [title]="title" [breadcrumbItem]="breadcrumbItem"></app-block-header>

  <form class="" [formGroup]="purchaseOrderForm" (ngSubmit)="onSubmit()">
    <div class="row clearfix">
      <div class="col-lg-12">
        <div class="card">
          <div class="header d-flex justify-content-between align-items-center pb-0">
            <h2>{{ cardTitle }}</h2>
            <div class="">
              <i class="icon datatable-icon-add"></i>
              <span style="text-decoration: underline; cursor: pointer" [routerLink]="['/purchaseOrder/view']"
                >View all</span
              >
            </div>
          </div>

          <div class="body row">
            <div class="col-lg-4">
              <app-input
                [required]="true"
                label="Invoice Number"
                id="invoiceNumber"
                name="Invoice Number"
                placeholder="Eg. INV001"
                [control]="purchaseOrderForm.get('invoiceNumber')"
              ></app-input>
            </div>

            <div class="form-group col-lg-4">
              <label for="address" class="control-label">Supplier</label>
              <select
                name=""
                id=""
                class="form-control mb-0"
                formControlName="supplierId"
                [ngClass]="{
                  'parsley-error':
                    !purchaseOrderForm.controls.supplierId.valid &&
                    (purchaseOrderForm.controls.supplierId.touched || purchaseOrderForm.controls.supplierId.dirty),
                  'parsley-success':
                    purchaseOrderForm.controls.supplierId.valid &&
                    (purchaseOrderForm.controls.supplierId.touched || purchaseOrderForm.controls.supplierId.dirty)
                }"
              >
                <option selected disabled value="">Select supplier</option>
                <option [value]="supplier.id" *ngFor="let supplier of suppliers"
                  >{{ supplier.companyname }} ({{ supplier.contactpersonname }})</option
                >
              </select>
              <app-input-error name="Category" [control]="purchaseOrderForm.get('supplierId')"></app-input-error>
            </div>

            <div class="form-group col-lg-4">
              <label for="address" class="control-label">Businesses</label>
              <select
                name=""
                id=""
                class="form-control mb-0"
                formControlName="shiptobusinessId"
                [ngClass]="{
                  'parsley-error':
                    !purchaseOrderForm.controls.shiptobusinessId.valid &&
                    (purchaseOrderForm.controls.shiptobusinessId.touched ||
                      purchaseOrderForm.controls.shiptobusinessId.dirty),
                  'parsley-success':
                    purchaseOrderForm.controls.shiptobusinessId.valid &&
                    (purchaseOrderForm.controls.shiptobusinessId.touched ||
                      purchaseOrderForm.controls.shiptobusinessId.dirty)
                }"
              >
                <option selected disabled value="">Select business</option>
                <option [value]="business.id" *ngFor="let business of businesses">{{ business.name }} </option>
              </select>
              <app-input-error
                name="subcategory"
                [control]="purchaseOrderForm.get('shiptobusinessId')"
              ></app-input-error>
            </div>

            <div class="form-group col-lg-12">
              <app-input
                [required]="true"
                label="Due Date"
                id="duedate"
                name="Due Date"
                placeholder="Eg. 20/02/2021"
                [control]="purchaseOrderForm.get('duedate')"
              ></app-input>
            </div>

            <div class="form-group col-lg-12 mt-2">
              <button
                type="submit"
                class="btn btn-client btn-round float-right"
                [disabled]="!purchaseOrderForm.valid"
                *ngIf="!formLoading"
              >
                {{ mode }}
              </button>
              <button class="btn btn-client btn-round float-right" [disabled]="true" *ngIf="formLoading">
                <i class="fa fa-spinner fa-spin" style="margin-right: 5px"></i>
                please wait
              </button>

              <button
                type="button"
                class="btn btn-outline-client btn-round"
                (click)="resetForm()"
                *ngIf="mode === 'Update'"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- PRODUCT CONFIGURATION -->
    <!--  <div class="row clearfix" *ngIf="mode === 'Create'">
      <div class="col-lg-12">
        <div class="card">
          <div class="header d-flex justify-content-between align-items-center pb-0">
            <h2>Product Configurations</h2>
          </div>

          <div class="body row">
            <div class="col-lg-3">
              <app-input
                [required]="true"
                label="Packing Quantity"
                id="pack"
                placeholder="Eg. 12"
                [control]="purchaseOrderForm.get('pack')"
                type="number"
                validator="number"
              ></app-input>
            </div>

            <div class="col-lg-3">
              <app-input
                label="Lead Time"
                id="leadtime"
                placeholder="Eg. 3hr"
                [control]="purchaseOrderForm.get('leadtime')"
                type="number"
                validator="number"
              ></app-input>
            </div>
            <div class="col-lg-5">
              <app-input
                label="Image link"
                id="imagelink"
                placeholder="Eg. https://placeholder.com"
                [control]="purchaseOrderForm.get('imagelink')"
              ></app-input>
            </div>

            <div class="form-group col-md-2 d-inline-block pt-4">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="canexpire" formControlName="canexpire" />
                <label class="custom-control-label pointer" for="canexpire">Can expire</label>
              </div>
            </div>

            <div class="form-group col-md-2 d-inline-block pt-4">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="canbesold" formControlName="canbesold" />
                <label class="custom-control-label pointer" for="canbesold">Is Can be sold</label>
              </div>
            </div>

            <div class="form-group col-md-2 d-inline-block pt-4">
              <div class="custom-control custom-checkbox">
                <input
                  type="checkbox"
                  class="custom-control-input"
                  id="canbepurchased"
                  formControlName="canbepurchased"
                />
                <label class="custom-control-label pointer" for="canbepurchased">Can be purchased</label>
              </div>
            </div>

            <div class="form-group col-md-2 d-inline-block pt-4">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="anypromo" formControlName="anypromo" />
                <label class="custom-control-label pointer" for="anypromo">Any promo</label>
              </div>
            </div>

            <div class="form-group col-lg-3 mt-2">
              <button
                type="submit"
                class="btn btn-client btn-round float-right"
                [disabled]="!purchaseOrderForm.valid"
                *ngIf="!formLoading"
              >
                {{ this.mode }}
              </button>
              <button class="btn btn-client btn-round float-right" [disabled]="true" *ngIf="formLoading">
                <i class="fa fa-spinner fa-spin" style="margin-right: 5px"></i>
                please wait
              </button>

              <button
                type="button"
                class="btn btn-outline-client btn-round"
                (click)="resetForm()"
                *ngIf="mode === 'Update'"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div> -->
  </form>
</div>
